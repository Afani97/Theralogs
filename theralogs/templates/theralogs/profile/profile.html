{% extends 'theralogs/base.html' %}

{% block content %}

    <div class="max-w-2xl mx-auto">
        <div class="flex content-center justify-center my-8">
            {% if profile.profile_image %}
                <img src="" class="rounded-full h-24 w-24 mr-5"/>
            {% endif %}
            <div class="self-center grid grid-cols-1 gap-3">
                <h1 class="text-xl">{{ profile.name }}</h1>
                <p class="text-lg">{{ profile.user.email }}</p>
                <p class="text-base">{{ profile.license_id }}</p>
                <a class="tl-button" href="{% url 'edit_profile' %}">Edit</a>
                {% if request.user.therapist.stripe_customer_id != null %}
                   <a class="tl-button" href="{% url 'update_payment' %}">Update Payment Info</a>
                {% else %}
                    <a class="tl-button" href="{% url 'update_payment' %}">Add Payment Info</a>
                {% endif %}

            </div>
        </div>

        <div class="mt-20">
            <div class="flex justify-between">
                <h1 class="text-2xl">Manage your patients:</h1>
                {% if request.user.therapist.stripe_customer_id != null %}
                    <a class="tl-button" href="{% url 'patient_create' %}">Add new patient</a>
                {% endif %}
            </div>
            <div class="grid grid-cols-4 gap-4 mt-8">
                {% for patient in patients %}
                    <p class="col-span-2 font-extrabold text-xl">{{ patient.name }}</p>
                    <a class="col-span-1 tl-button" href="{% url 'patient_edit' patient.id %}">Edit</a>
                    <a class="col-span-1 tl-button bg-white hover:bg-white text-black" href="{% url 'patient_delete' patient.id %}">Delete</a>
                {% endfor %}
            </div>
        </div>
    </div>

{% endblock %}